---
id: multi-cluster
title: Multi-cluster
sidebar_label: Multi-cluster
description: Multi-cluster
keywords:
  - multi-cluster
---

## Configure Trust

- https://istio.io/latest/docs/tasks/security/cert-management/plugin-ca-cert/

```shell
mkdir certs \
&& cd certs
```

```shell
wget https://raw.githubusercontent.com/istio/istio/master/tools/certs/common.mk \
&& wget https://raw.githubusercontent.com/istio/istio/master/tools/certs/Makefile.selfsigned.mk \
```

```shell
make -f Makefile.selfsigned.mk root-ca
```

- `root-cert.pem`: 생성된 루트 인증서
- `root-key.pem`: 생성된 루트 키
- `root-ca.conf`: openssl루트 인증서를 생성하기 위한 구성
- `root-cert.csr`: 루트 인증서에 대해 생성된 CSR

```shell
export CLUSTER_NAME=<cluster-name>
```

```shell
make -f Makefile.selfsigned.mk ${CLUSTER_NAME}-cacerts
```

클러스터 수 만큼 인증서를 생성해주세요.

- `ca-cert.pem`: 생성된 중간 인증서
- `ca-key.pem`: 생성된 중간 키
- `cert-chain.pem`: istiod에서 사용하는 생성된 인증서 체인
- `root-cert.pem`: 루트 인증서

```shell
kubectl create secret generic cacerts -n istio-system \
    --from-file=$CLUSTER_NAME/ca-cert.pem \
    --from-file=$CLUSTER_NAME/ca-key.pem \
    --from-file=$CLUSTER_NAME/cert-chain.pem \
    --from-file=$CLUSTER_NAME/root-cert.pem
```

## Multi-Primary on different networks

## Reference

- https://istio.io/latest/docs/setup/install/multicluster/
