---
id: swap
title: Swap Memory
sidebar_label: Swap Memory
description: Swap Memory
keywords:
  - Linux
  - swap
  - memory
---

## Swap Space 만들기

```shell
sudo mkswap <spec>
```

- `<spec>`: file, partition, zram을 사용할 수 있습니다.

### Swap file

```shell
sudo dd if=/dev/zero of=<swapfile> bs=<blockSize> count=<blockCount>
```

```shell
sudo chmod 600 <swapfile>
```

### ZRAM

## Swap ON/OFF

```shell
sudo swapon <option> <spec>
```

- `<option>`
  - `-p, --priority <priority>`
    - 0 ~ 32767 값을 설정 할 수 있습니다.
    - 큰 값일 수록 우선순위가 높습니다.

```shell
sudo swapoff <spec>
```

```shell title="/etc/fstab"
<spec> none swap defaults[,<option>] 0 0
```

- `<option>`
  - `pri=<priority>`: swap 우선순위

## vm.swappiness

- https://github.com/torvalds/linux/blob/v6.2/mm/vmscan.c#L3000-L3014
