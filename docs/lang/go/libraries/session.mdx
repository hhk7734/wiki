---
id: session
title: Session
sidebar_label: Session
description: session
keywords:
  - session
---

## Store

어떤 데이터베이스를 사용하는지에 따라 세션을 저장하는 방식이 달라질 수 있습니다.

- `session:sessions:<sid>`: `{<key>: <value>}`
- `session:accounts:<aid>`: `{<sid>}`
- `session:expirations:<timestamp>`: `{<sid>}`

## 클라이언트에서 세션&쿠키 갱신 요청

- 쿠키 만료 시간 == 세션 만료 시간
- 만료 시간 짧음
- 로그인 -> `session.Create` -> `store.Set`
  - 쿠키 생성
  - 세션 생성
- 기타 API -> `session.GetStore` -> `store.Get`
- 갱신 -> `session.Refresh`
  - 세션 키 변경 및 만료 시간 갱신
  - 쿠키 값 변경 및 만료 시간 갱신
- 로그아웃 -> `session.GetStore` -> `store.Delete` -> `session.Delete`
  - 쿠키 삭제
  - 세션 삭제

## 서버에서 세션 자동 갱신

- 쿠키 만료 시간 > 세션 만료 시간
- 로그인 -> `session.Create` -> `store.Set`
  - 쿠키 생성
  - 세션 생성
- 기타 API -> `session.Update` -> `store.Get`
  - **세션 만료 시간 갱신**
- 갱신 -> `session.Refresh`
  - 세션 키 변경 및 만료 시간 갱신
  - 쿠키 값 변경 및 만료 시간 갱신
- 로그아웃 -> `session.GetStore` -> `store.Delete` -> `session.Delete`
  - 쿠키 삭제
  - 세션 삭제
