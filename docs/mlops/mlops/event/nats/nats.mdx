---
id: nats
title: NATS
sidebar_label: NATS
description: NATS
keywords:
  - nats
---

## Installation

```shell
helm repo add nats https://nats-io.github.io/k8s/helm/charts
```

- [PersistentVolume](/docs/mlops/mlops/kubernetes/persistent-volume)

```shell
helm repo update nats \
&& helm search repo nats/nats -l | head -n 10
```

```shell
helm show values nats/nats \
    --version 0.19.3 \
    > nats-values.yaml
```

```yaml title="nats-values.yaml"
fullnameOverride: ""

commonLabels: {}

nats:
  resources:
    requests:
      cpu: 1
      memory: 2Gi
    limits:
      cpu: 2
      memory: 2Gi

  jetstream:
    enabled: true

    memStorage:
      enabled: false
      size: 1Gi

    fileStorage:
      enabled: true
      storageDirectory: /data
      size: 10Gi
      accessModes:
        - ReadWriteOnce

affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - podAffinityTerm:
          labelSelector:
            matchLabels:
              app.kubernetes.io/name: nats
              app.kubernetes.io/instance: nats
          topologyKey: kubernetes.io/hostname
        weight: 100

statefulSetPodLabels: {}

cluster:
  enabled: true
  replicas: 3

natsbox:
  enabled: false

auth:
  enabled: true

  basic:
    users:
      - user: <user>
        password: <password>
      - nkey: <nkey-user>
```

```shell
helm template nats nats/nats \
    --version 0.19.3 \
    -n event \
    -f nats-values.yaml \
    > nats.yaml
```

```shell
helm upgrade nats nats/ntas \
    --install \
    --version 0.19.3 \
    -n event \
    --history-max 3 \
    -f nats-values.yaml
```
